## 命令格式

在shell中的命令基本都是以下格式。

```shell
command [arg1... [zrgN]]
```

`command`是具体的命令或者一个可执行的文件，`agr1 ... argN`是传递给命令的参数，是可选的。

```shell
$ ls -l
```

上面的这个命令中，`ls`是命令，`-l`就是参数。大部分情况下，参数要紧跟在命令后面，并通过空格进行分割。如果参数之间有多个空格，`shell`会自动忽略多余的空格。

```shell
# 以下的命令是在 a 的输出后面紧跟 b 输出结果为 ab
$ echo -n a; echo b

# 如果将参数 -n 不紧跟 a，那么输出结果为
# a -n 
# b
$ echo a -n; echo b
```

有些参数是命令的配置项，这些配置项一般都以一个连词线开头，比如上面的`-l`。同一个配置项往往有长和短两种形式，比如`-l`是短形式，`--list`是长形式，它们的作用完全相同。短形式便于手动输入，长形式一般用在脚本之中，可读性更好，利于解释自身的含义。

```shell
# 短形式
$ ls -r

# 长形式
$ ls --reverse
```

上面命令中，`-r`是短形式，`--reverse`是长形式，作用完全一样。前者便于输入，后者便于理解。

单个命令一般都是一行，用户按下回车键，就开始执行。有些命令比较长，写成多行会有利于阅读和编辑，这时可以在每一行的结尾加上反斜杠，`shell`就会将下一行跟当前行放在一起解释。

```shell
$ echo foo bar

# 等同于
$ echo foo \
bar
```

## 分号与命令组合符

它们三个符合都是用于在一行语句中执行多个命令的，但是不同的符号对执行的关系有区别。

- 分号（`;`）：无论第一个命令执行是否成功，**总是会执行**第二个命令。

```shell
$ cat a.txt; echo hello
```

如果`a.txt`文件不存在，那么第一个命令将报错：`cat: a.text: No such file or directory`。但是第二个命令`echo hello`**会**被正常执行。

- 单逻辑或（`|`）: 用于将一个命令的标准输出作为下一个命令的标准输入。

```shell
$ ls -l | grep ".txt"
```

这个命令会列出当前目录下的所有文件和子目录，并通过管道将其结果传递给 `grep` 命令，查找包含 `.txt` 的行。如果第一个命令没有执行成功，它也就不会产生任何标准输出，因此第二个命令不会接收到有效的输入。在这种情况下，第二个命令通常不会被执行。

- `&`: 当一个命令后面跟上 `&` 符号时，该命令将会在后台运行，shell会立即返回提示符允许用户输入新的命令，而不等待该命令完成。

```shell
$ npm run dev &
```

这个命令会将`npm run dev`命令挂到后台执行。

后台进程的状态可以通过 `jobs` 命令查看，并通过 `fg` 或 `bg` 命令将它们移至前台或继续在后台执行。

```shell
$ npm run dev &

# 这个时候我们使用 ctrl+C 是无法将其终止的，因为他被移动到了后台

# 查看所有的后台进程
$ jobs
[1]+ Runing    npm run dev &

# 利用 fg 命令将其移动在前台 然后可以使用 ctrl+C 终止运行 
$ fg %1
# 这样该任务就会从后台切换到前台，并且能够与用户进行交互或者继续其输出。如果后台只有一个任务，可以直接使用 fg 而无需指定编号，它会自动将最后一个放入后台的任务移至前台。

# 查看所有的后台进程
$ jobs
# 空
```

- 双逻辑或（`||`）：是逻辑运算符，用于条件执行命令。如果左边的命令执行返回非零退出状态（即失败），则执行右边的命令。也就是只有左边的命令**失败**了才会执行右边的命令，否则不执行右边的命令。

```shell
$ cat a.txt || echo hello
```

如果`a.txt`文件不存在，那么第一个命令将报错：`cat: a.text: No such file or directory`。那么第二个命令将**会**被执行。

如果`a.txt`文件存在，那么第二个命令不会执行，只输出第一个命令的返回结果。

- 双逻辑与（`&&`）：是逻辑运算符，用于条件执行命令。如果左边的命令执行返回零退出状态（即成功），则执行右边的命令。也就是只有左边的命令**成功**了才会执行右边的命令，否则不执行右边的命令。

```shell
$ cat a.txt && echo hello
```

如果`a.txt`文件不存在，那么第一个命令将报错：`cat: a.text: No such file or directory`。那么第二个命令将**不会**被执行。